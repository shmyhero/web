$(function(){var a=urlParse("securityId")==""?"21535":urlParse("securityId");Highcharts.setOptions({global:{useUTC:false},lang:{rangeSelectorFrom:"日期:",rangeSelectorTo:"至",rangeSelectorZoom:"范围",loading:"加载中...",shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],weekdays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],},colors:["#5f97f6","#50B432","#ED561B","#DDDF00","#24CBE5","#64E572","#FF9655","#FFF263","#6AF9C4"]});$.getJSON("http://cfd-webapi.chinacloudapp.cn/api/security/"+a,function(b){console.log(b);$(".p1").html(b.name+"("+b.symbol+")");var c="";if(b.last!==b.preClose){c=(b.last-b.preClose)>0?"risePercent":"fallPercent"}else{c="stopPercent"}$(".p2").addClass(c);$(".p2").addClass().html("<span>"+b.last+"</span> <span>"+((b.last-b.preClose)/b.preClose*100).toFixed(2)+"%</span>");draw(a,b.preClose)})});function draw(b,a){$.getJSON("http://cfd-webapi.chinacloudapp.cn/api/quote/"+b+"/tick/today",function(c){data=new Array();$.each(c,function(f,e){var d=new Date(e.time);data.push([d.getTime(),e.p])});$("#container0").highcharts("StockChart",{title:{text:""},scrollbar:{enabled:false},navigator:{enabled:false},subtitle:{text:""},chart:{spacing:[5,5,5,5],plotShadow:true,},rangeSelector:{buttons:[{type:"hour",count:1,text:"1h"},{type:"day",count:1,text:"1D"}],enabled:false,selected:1,inputEnabled:false},yAxis:[{opposite:false,gridLineColor:"#FFF",gridLineWidth:0.2,top:"5%",height:"90%",showFirstLabel:true,showLastLabel:true,labels:{align:"left",x:1,y:-3,},},{opposite:true,gridLineColor:"#FFF",gridLineWidth:0.2,top:"5%",height:"90%",showFirstLabel:true,showLastLabel:true,labels:{formatter:function(){return(100*(this.value/a-1)).toFixed(2)+"%"}},}],xAxis:{lineColor:"transparent",tickColor:"transparent",labels:{formatter:function(){var d=Highcharts.dateFormat("%H:%M ",this.value);return d},},},plotOptions:{area:{connectNulls:true,enableMouseTracking:false}},series:[{name:"AAPL",type:"area",data:data,gapSize:1,tooltip:{valueDecimals:2},lineColor:"#fff",lineWidth:1,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:0.9},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},threshold:null},{name:"AAPL Stock Price",data:data,type:"scatter",cursor:"pointer",onSeries:"candlestick",color:"transparent",tooltip:{valueDecimals:2},style:{fontSize:"0px",fontWeight:"0",textAlign:"center"},zIndex:-1000,yAxis:1,}]})})}function draw2(b,a){$.getJSON("http://cfd-webapi.chinacloudapp.cn/api/quote/"+b+"/tick/week",function(c){data=new Array();$.each(c,function(f,e){var d=new Date(e.time);data.push([d.getTime(),e.p])});$("#container1").highcharts("StockChart",{title:{text:""},scrollbar:{enabled:false},navigator:{enabled:false},subtitle:{text:""},chart:{spacing:[5,5,5,5],plotShadow:true,},rangeSelector:{buttons:[{type:"hour",count:1,text:"1h"},{type:"day",count:1,text:"1D"}],enabled:false,selected:1,inputEnabled:false},yAxis:[{opposite:false,gridLineColor:"#FFF",gridLineWidth:0.2,top:"5%",height:"90%",showFirstLabel:true,showLastLabel:true,labels:{align:"left",x:1,y:-3,},},{opposite:true,gridLineColor:"#FFF",gridLineWidth:0.2,top:"5%",height:"90%",showFirstLabel:true,showLastLabel:true,labels:{formatter:function(){return(100*(this.value/a-1)).toFixed(2)+"%"}},}],xAxis:{lineColor:"transparent",tickColor:"transparent",labels:{formatter:function(){var d=Highcharts.dateFormat("%m-%d ",this.value);return d},},},plotOptions:{area:{connectNulls:true,enableMouseTracking:false}},series:[{name:"AAPL",type:"area",data:data,gapSize:1,tooltip:{valueDecimals:2},lineColor:"#fff",lineWidth:1,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:0.9},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},threshold:null},{name:"AAPL Stock Price",data:data,type:"scatter",cursor:"pointer",onSeries:"candlestick",color:"transparent",tooltip:{valueDecimals:2},style:{fontSize:"0px",fontWeight:"0",textAlign:"center"},zIndex:-1000,yAxis:1,}]})})}function draw3(b,a){$.getJSON("http://cfd-webapi.chinacloudapp.cn/api/quote/"+b+"/tick/month",function(c){data=new Array();$.each(c,function(f,e){var d=new Date(e.time);data.push([d.getTime(),e.p])});$("#container2").highcharts("StockChart",{title:{text:""},scrollbar:{enabled:false},navigator:{enabled:false},subtitle:{text:""},chart:{spacing:[5,5,5,5],plotShadow:true,},rangeSelector:{buttons:[{type:"hour",count:1,text:"1h"},{type:"day",count:1,text:"1D"}],enabled:false,selected:1,inputEnabled:false},yAxis:[{opposite:false,gridLineColor:"#FFF",gridLineWidth:0.2,top:"5%",height:"90%",showFirstLabel:true,showLastLabel:true,labels:{align:"left",x:1,y:-3,},},{opposite:true,gridLineColor:"#FFF",gridLineWidth:0.2,top:"5%",height:"90%",showFirstLabel:true,showLastLabel:true,labels:{formatter:function(){return(100*(this.value/a-1)).toFixed(2)+"%"}},}],xAxis:{lineColor:"transparent",tickColor:"transparent",labels:{formatter:function(){var d=Highcharts.dateFormat("%m-%d ",this.value);return d},},},plotOptions:{area:{connectNulls:true,enableMouseTracking:false}},series:[{name:"AAPL",type:"area",data:data,gapSize:1,tooltip:{valueDecimals:2},lineColor:"#fff",lineWidth:1,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:0.9},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},threshold:null},{name:"AAPL Stock Price",data:data,type:"scatter",cursor:"pointer",onSeries:"candlestick",color:"transparent",tooltip:{valueDecimals:2},style:{fontSize:"0px",fontWeight:"0",textAlign:"center"},zIndex:-1000,yAxis:1,}]})})};